{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useRef, useLayoutEffect, useCallback, useMemo } from 'react';\nimport { gsap } from 'gsap';\n\n/**\n * Creates an SVG rect element that follows your mouse.\n * \n * @param disable       Whether or not the scroll effect will be enabled.\n * @param trailLength   How much the circle would extends\n * @param radius        The radius of the circle \n */\nconst MouseFollower = ({ disable=false, trailLength=40, radius=60 }) => {\n    const {current: mousePreviousPosition} = useRef({x: 0, y: 0})\n    const {current: mouseCurrentPosition}  = useRef({x: 0, y: 0})\n\n    const {current: quickSet} = useRef({x: null, y: null, rotate: null, scaleX: null, scaleY: null})\n    \n    const isMouseOffScreen = useRef(true)\n    const rect = useMemo(() => ({ coords: 110 - radius/2, corner: radius/2 }), [radius])\n    \n    const onTick = useCallback(() => {\n        const getRotation = (x, y) => Math.atan2(y, x) * 180 / Math.PI // return the angle converted in degrees from radians\n        const getDistance = (x, y) => Math.min(Math.sqrt(x*x + y*y), trailLength) // return the distance between the x and y value of the previous position \n\n        const rotation = getRotation(mousePreviousPosition.x, mousePreviousPosition.y)\n        const distance = getDistance(mousePreviousPosition.x, mousePreviousPosition.y)\n\n        quickSet.x(mouseCurrentPosition.x)\n        quickSet.y(mouseCurrentPosition.y)\n\n        quickSet.width(radius + distance)\n        quickSet.rotate(rotation)\n    }, [])\n\n    const handleMouseLeave = event => {\n        event.stopPropagation()\n\n        isMouseOffScreen.current = true\n        gsap.to('#cursor', { id: 'hideCursor', duration: 0.5, delay: 1, opacity: 0 })\n    }\n\n    const handleMouseMove = ({ clientX, clientY }) => {\n        if( isMouseOffScreen.current ) {\n            mouseCurrentPosition.x = clientX\n            mouseCurrentPosition.y = clientY\n            \n            isMouseOffScreen.current = false \n            \n            gsap.getById('hideCursor')?.kill()\n            gsap.to('#cursor', { duration: 0.5, opacity: 1 })\n            return\n        }\n\n        gsap.to(mouseCurrentPosition, { duration: 1.2, x: clientX, y: clientY, ease: 'expo.out', onUpdate: () => {\n            mousePreviousPosition.x = clientX - mouseCurrentPosition.x // distance from the actual x position to the current position one\n            mousePreviousPosition.y = clientY - mouseCurrentPosition.y // distance from the actual y position to the current position one\n        }})\n    }\n\n    useLayoutEffect(() => {\n        quickSet.x = gsap.quickSetter('#cursor', 'x', 'px')\n        quickSet.y = gsap.quickSetter('#cursor', 'y', 'px')\n\n        quickSet.rotate = gsap.quickSetter('#cursor', 'rotate', 'deg')\n        quickSet.width  = gsap.quickSetter('#rect', 'width')\n\n        gsap.ticker.add(onTick)\n        \n        document.documentElement.addEventListener('mousemove', handleMouseMove)\n        document.documentElement.addEventListener('mouseleave', handleMouseLeave)\n\n        return () => {\n            document.documentElement.removeEventListener('mousemove', handleMouseMove)\n            document.documentElement.removeEventListener('mouseleave', handleMouseLeave)                \n        }\n\n    }, [onTick, handleMouseMove, handleMouseLeave])\n\n    return disable ? null : (\n        <svg id=\"cursor\" width=\"220\" height=\"220\" viewBox=\"0 0 220 220\" fill=\"none\" style={{ position: 'fixed', top: '-109px', left: '-109px', opacity: 0, pointerEvents: 'none', willChange: 'transform', mixBlendMode: 'difference', zIndex: 200 }}>\n            <rect id=\"rect\" x={rect.coords} y={rect.coords} width={radius} height={radius} rx={rect.corner} stroke=\"white\" strokeOpacity=\"0.8\" strokeWidth=\"2px\" fillOpacity=\"0\" fill=\"white\"/>\n        </svg>\n    )\n}\n\nexport default MouseFollower"],"names":["MouseFollower","_ref","_ref$disable","disable","_ref$trailLength","trailLength","_ref$radius","radius","_useRef","useRef","x","y","mousePreviousPosition","current","_useRef2","mouseCurrentPosition","_useRef3","rotate","scaleX","scaleY","quickSet","isMouseOffScreen","rect","useMemo","coords","corner","onTick","useCallback","getRotation","Math","atan2","PI","getDistance","min","sqrt","rotation","distance","width","handleMouseLeave","event","stopPropagation","gsap","to","id","duration","delay","opacity","handleMouseMove","_ref2","clientX","clientY","_gsap$getById","getById","kill","ease","onUpdate","useLayoutEffect","quickSetter","ticker","add","document","documentElement","addEventListener","removeEventListener","React","createElement","height","viewBox","fill","style","position","top","left","pointerEvents","willChange","mixBlendMode","zIndex","rx","stroke","strokeOpacity","strokeWidth","fillOpacity"],"mappings":"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"}